<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Día y noche con sol y luna</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
</head>

<body>
<script>
// Sol
let x_s, y_s, v_s, d_s, r_s;
let adelanto_s;

// Luna
let x_l, y_l, v_l, d_l, r_l;
let adelanto_l;

// Control
let esDia = true;

// Calendario
let dia, mes, anio;


function setup() {
  createCanvas(600, 600);

  // Tamaños
  d_s = width * 0.20;
  r_s = d_s * 0.5;

  d_l = width * 0.15;
  r_l = d_l * 0.5;

  // Posiciones
  y_s = height * 0.15;
  y_l = height * 0.2;

  // Velocidades
  v_s = width / 100;
  v_l = width / 100;

  // Retrasos
  adelanto_s = width * 0.4;
  adelanto_l = width * 0.4;

  // Inicio
  x_s = -r_s;
  x_l = -r_l - adelanto_l;

  // Calendario
  dia = 1;
  mes = 1;
  anio = 2026;
  
}

function draw() {
  noStroke();

  // Ciela
  if (esDia) {
    background(74, 123, 161);
  } else {
    background(0);
  }

  // Suelo
  fill(20, 120, 40);
  rect(0, height * 0.8, width, height * 0.2);

  // Sol
  if (esDia) {
    if (x_s > -r_s && x_s < width + r_s) {
      fill(255, 210, 0);
      circle(x_s, y_s, d_s);
    }

    x_s += v_s;

    // Cuando el sol termina, empieza la noche
    if (x_s > width + r_s + adelanto_s) {
      esDia = false;
      x_l = -r_l;
    }
  }

  // Luna
  if (!esDia) {
    if (x_l > -r_l && x_l < width + r_l) {
      fill(220);
      circle(x_l, y_l, d_l);
    }

    x_l += v_l;

    // Cuando la luna termina, vuelve el día
    if (x_l > width + r_l + adelanto_l) {
      esDia = true;
      x_s = -r_s;
    }
    
    // Calendario 
    noStroke(); //sin trazo

     // Color dependiente de la posición del sol.
      if (x_s <= width + r_s) { fill(0);    } 
      else { fill(255); }

     // Elegimos un tamaño de letra que se vea bien
     textSize(20); 

     // Escribimos fíjate cómo se incluyen las variables dentro de un texto fijo. Esto te será útil en el examen.
     text("Fecha: (" + dia + ") (" + mes + ") (" + anio + ")", 10, 20);
   
     if (x_s > 2 * width + r_s) {

       // Incremento la variable día.
      dia = dia + 1; 

     // Reseteo día e incremento mes si me paso de 30 días
      if (dia > 30) { dia = 1;    mes = mes + 1;   }

      // Reseteo mes e incremento año si me paso de 12 meses
      if (mes > 12) { mes = 1;    anio = anio + 1; }
    }
    
    
  }
  
  
  
  
  
  
  
  
}
</script>
</body>
</html>